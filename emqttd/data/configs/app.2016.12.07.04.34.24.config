[{emq_stomp,
     [{allow_anonymous,true},
      {default_user,[{login,"guest"},{passcode,"guest"}]},
      {frame,
          [{max_headers,10},{max_header_length,1024},{max_body_length,8192}]},
      {listener,{61613,[{acceptors,4},{max_clients,512}]}}]},
 {emq_reloader,[{logfile,"log/reloader.log"},{interval,60}]},
 {emq_recon,[{gc_interval,600}]},
 {emq_mod_subscription,[{backend,true},{topics,[{<<"$client/%c">>,1}]}]},
 {emq_mod_retainer,
     [{expired_after,0},
      {max_payload_size,65536},
      {max_message_num,100000},
      {storage_type,ram}]},
 {emq_mod_presence,[{qos,0},{enable,true}]},
 {emq_coap,[{listener,5683},{gateway,[{"mqtt",emq_coap_gateway,[]}]}]},
 {emq_auth_redis,
     [{acl_nomatch,deny},
      {acl_cmd,"HGETALL mqtt_acl:%u"},
      {super_cmd,"HGET mqtt_user:%u is_superuser"},
      {password_hash,sha256},
      {auth_cmd,"HGET mqtt_user:%u password"},
      {server,
          [{pool_size,8},
           {auto_reconnect,1},
           {host,"127.0.0.1"},
           {port,6379},
           {database,0},
           {password,[]}]}]},
 {emq_auth_pgsql,
     [{acl_nomatch,deny},
      {acl_query,
          "select allow, ipaddr, username, clientid, access, topic from mqtt_acl where ipaddr = '%a' or username = '%u' or username = '$all' or clientid = '%c'"},
      {super_query,
          "select is_superuser from mqtt_user where username = '%u' limit 1"},
      {password_hash,sha256},
      {auth_query,
          "select password from mqtt_user where username = '%u' limit 1"},
      {server,
          [{pool_size,8},
           {auto_reconnect,1},
           {host,"127.0.0.1"},
           {port,5432},
           {username,"root"},
           {password,[]},
           {database,"mqtt"},
           {encoding,utf8},
           {ssl,false}]}]},
 {emq_auth_mysql,
     [{acl_nomatch,deny},
      {acl_query,
          "select allow, ipaddr, username, clientid, access, topic from mqtt_acl where ipaddr = '%a' or username = '%u' or username = '$all' or clientid = '%c'"},
      {super_query,
          "select is_superuser from mqtt_user where username = '%u' limit 1"},
      {password_hash,sha256},
      {auth_query,
          "select password from mqtt_user where username = '%u' limit 1"},
      {server,
          [{pool_size,8},
           {auto_reconnect,1},
           {host,"127.0.0.1"},
           {port,3306},
           {user,[]},
           {password,[]},
           {database,"mqtt"},
           {encoding,utf8},
           {keep_alive,true}]}]},
 {emq_auth_mongo,
     [{acl_nomatch,deny},
      {server,
          [{pool_size,8},
           {auto_reconnect,1},
           {host,"127.0.0.1"},
           {port,27017},
           {database,"mqtt"}]},
      {auth_query,
          [{collection,"mqtt_user"},
           {password_field,"password"},
           {password_hash,sha256},
           {selector,"username=%u"}]},
      {super_query,
          [{collection,"mqtt_user"},
           {super_field,"is_superuser"},
           {selector,"username=%u"}]},
      {acl_query,[{collection,"mqtt_user"},{selector,"username=%u"}]}]},
 {emq_auth_http,
     [{acl_nomatch,deny},
      {auth_req,
          [{url,"http://127.0.0.1:8080/mqtt/auth"},
           {method,post},
           {params,[{"clientid","%c"},{"username","%u"},{"password","%P"}]}]},
      {super_req,
          [{url,"http://127.0.0.1:8080/mqtt/superuser"},
           {method,post},
           {params,[{"clientid","%c"},{"username","%u"}]}]},
      {acl_req,
          [{url,"http://127.0.0.1:8080/mqtt/acl"},
           {method,get},
           {params,
               [{"access","%A"},
                {"username","%u"},
                {"clientid","%c"},
                {"ipaddr","%a"},
                {"topic","%t"}]}]}]},
 {emqttd,
     [{plugins_loaded_file,"data/loaded_plugins"},
      {plugins_etc_dir,"etc/plugins/"},
      {broker_sys_interval,60},
      {cache_acl,true},
      {acl_file,"etc/acl.conf"},
      {allow_anonymous,true},
      {protocol,
          [{max_clientid_len,1024},
           {max_packet_size,65536},
           {client_idle_timeout,30}]},
      {session,
          [{max_inflight,100},
           {retry_interval,60},
           {await_rel_timeout,20},
           {max_awaiting_rel,0},
           {collect_interval,0},
           {expired_after,86400}]},
      {queue,
          [{priority,[]},
           {type,simple},
           {max_length,infinity},
           {low_watermark,0.2},
           {high_watermark,0.6},
           {queue_qos0,true}]},
      {pubsub,[{pool_size,8},{by_clientid,true},{async,true}]},
      {bridge,[{max_queue_len,10000},{ping_down_interval,1}]},
      {listeners,
          [{tcp,1883,
               [{connopts,[]},
                {sockopts,[{backlog,1024},{nodelay,true}]},
                {acceptors,8},
                {max_clients,1024}]},
           {ssl,8883,
               [{ssl,
                    [{handshake_timeout,15000},
                     {keyfile,"etc/certs/key.pem"},
                     {certfile,"etc/certs/cert.pem"}]},
                {connopts,[]},
                {sockopts,[{nodelay,true}]},
                {acceptors,4},
                {max_clients,512}]},
           {http,8083,
               [{connopts,[]},
                {sockopts,[{nodelay,true}]},
                {acceptors,4},
                {max_clients,64}]},
           {https,8084,
               [{ssl,
                    [{handshake_timeout,15000},
                     {keyfile,"etc/certs/key.pem"},
                     {certfile,"etc/certs/cert.pem"}]},
                {connopts,[]},
                {sockopts,[{nodelay,true}]},
                {acceptors,4},
                {max_clients,64}]}]},
      {sysmon,
          [{long_gc,false},
           {long_schedule,240},
           {large_heap,8388608},
           {busy_port,false},
           {busy_dist_port,true}]}]},
 {sasl,[{sasl_error_logger,false}]},
 {lager,
     [{error_logger_hwm,1000},
      {error_logger_redirect,true},
      {handlers,
          [{lager_console_backend,error},
           {lager_file_backend,
               [{file,"log/error.log"},
                {level,error},
                {size,10485760},
                {date,"$D0"},
                {count,5}]}]},
      {crash_log,"log/crash.log"}]},
 {emq_auth_ldap,
     [{ldap,
          [{ssl,false},
           {servers,["127.0.0.1"]},
           {port,389},
           {timeout,30},
           {user_dn,"uid=%u,ou=People,dc=example,dc=com"}]}]},
 {emq_dashboard,
     [{listeners,[{http,18083,[{acceptors,2},{max_clients,512}]}]}]},
 {emq_sn,[{listener,{1884,[]}}]}].
